# =============================================================================
# Keep Render Server Warm
# =============================================================================
# Pings the backend every 14 minutes to prevent Render free tier from sleeping.
# This runs on GitHub Actions (free) so your users never hit cold starts.
# =============================================================================

name: Keep Server Alive

on:
  schedule:
    # Run every 14 minutes (Render sleeps after 15 min of inactivity)
    - cron: '*/14 * * * *'
  workflow_dispatch:  # Allow manual trigger

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Backend Health Endpoint
        run: |
          echo "Pinging server to keep it warm..."
          curl -s -o /dev/null -w "Status: %{http_code}, Time: %{time_total}s\n" \
            https://vector-db-api-gcy7.onrender.com/api/health || true
          echo "Done!"
